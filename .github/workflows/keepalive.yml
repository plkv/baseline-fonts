name: Keep Vercel Free Project Active

on:
  schedule:
    - cron: '0 5 */6 * *' # Every 6 days at 05:00 UTC
  workflow_dispatch: {}

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Curl production URL
        run: |
          if [ -z "${{ secrets.PROD_URL }}" ]; then
            echo "PROD_URL secret not set; skipping keepalive" && exit 0
          fi
          echo "Pinging ${{ secrets.PROD_URL }}"
          curl -sS -m 10 "$${{ secrets.PROD_URL }}" >/dev/null || true
          # Optional: ping a light API endpoint to warm storage
          curl -sS -m 10 "$${{ secrets.PROD_URL }}/api/preview-health" >/dev/null || true

